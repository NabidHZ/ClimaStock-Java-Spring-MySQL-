<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Recomendaciones por Tienda</title>
  <link rel="stylesheet" href="/css/stylesheet.css">
</head>
<body>
<a th:href="@{/}">Volver al Dashboard</a>
<h1>Recomendaciones por Tienda</h1>

<form th:action="@{/recomendaciones}" method="get">
  <label for="tienda">Selecciona una tienda:</label>
  <select name="tiendaId" id="tienda" required>
    <option th:each="tienda : ${tiendas}"
            th:value="${tienda.id}"
            th:text="${tienda.nombre}"
            th:selected="${tienda.id} == ${selectedTiendaId}"></option>
  </select>
  <button type="submit">Ver recomendaciones</button>
</form>

<div th:if="${selectedTiendaId != null}">
  <h3>Datos meteorológicos de la tienda seleccionada:</h3>
  <p>
    <strong>Temperatura máxima prevista:</strong>
    <span th:text="${temperatura} + ' °C'"></span><br>
    <strong>¿Previsión de lluvia?:</strong>
    <span th:text="${lluvia} ? 'Sí' : 'No'"></span>
  </p>
</div>

<!-- ...código anterior... -->

<div th:if="${lluvia}">
  <h2 style="color:blue;">¡Atención! Hay previsión de lluvia.</h2>
  <h3>Recomendación de prendas impermeables:</h3>
  <div class="card-background">
    <div class="card-list">
      <div class="product-card" th:each="producto : ${impermeables}">
        <div class="product-image">
          <img th:src="@{'/img/' + ${producto.imagen}}" alt="Imagen" th:if="${producto.imagen != null}" />
        </div>
        <div class="product-info">
          <h2 th:text="${producto.nombre}"></h2>
          <p><strong>Referencia:</strong> <span th:text="${producto.id}"></span></p>
          <p><strong>Categoría:</strong> <span th:text="${producto.categoria}"></span></p>
          <p><strong>Estación:</strong> <span th:text="${producto.estacion}"></span></p>
          <p><strong>Impermeable:</strong> <span th:text="${producto.impermeable} ? 'Sí' : 'No'"></span></p>
        </div>
      </div>
    </div>
  </div>
</div>

<div th:if="${productos}">
  <h2>Productos recomendados:</h2>
  <div class="card-background">
    <div class="card-list">
      <div class="product-card" th:each="producto : ${productos}">
        <div class="product-image">
          <img th:src="@{'/img/' + ${producto.imagen}}" alt="Imagen" th:if="${producto.imagen != null}" />
        </div>
        <div class="product-info">
          <h2 th:text="${producto.nombre}"></h2>
          <p><strong>Referencia:</strong> <span th:text="${producto.id}"></span></p>
          <p><strong>Categoría:</strong> <span th:text="${producto.categoria}"></span></p>
          <p><strong>Estación:</strong> <span th:text="${producto.estacion}"></span></p>
          <p><strong>Impermeable:</strong> <span th:text="${producto.impermeable} ? 'Sí' : 'No'"></span></p>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>